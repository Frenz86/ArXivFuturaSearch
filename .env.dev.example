# =============================================================================
# ArXiv RAG Copilot - Development Environment Variables
# =============================================================================
# Configuration for local development with ChromaDB (embedded vector store)
#
# Usage:
#   cp .env.dev.example .env
#   docker compose -f docker-compose.dev.yml up -d
# =============================================================================

# =============================================================================
# Application Ports
# =============================================================================
APP_PORT=8000
METRICS_PORT=8001
REDIS_PORT=6379

# =============================================================================
# Environment
# =============================================================================
ENVIRONMENT=development

# =============================================================================
# Vector Store Configuration
# =============================================================================
# For development, use ChromaDB (embedded, no external database needed)
VECTORSTORE_MODE=chroma

# =============================================================================
# LLM Configuration
# =============================================================================
# Options: openrouter, ollama, mock
LLM_MODE=openrouter

# OpenRouter Configuration (get API key at https://openrouter.ai/keys)
OPENROUTER_API_KEY=sk-or-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet
OPENROUTER_TIMEOUT=120
OPENROUTER_MAX_RETRIES=3

# Ollama Configuration (for local LLM)
# Use host.docker.internal to connect to Ollama running on your host machine
OLLAMA_BASE_URL=http://host.docker.internal:11434
OLLAMA_MODEL=llama3.1

# =============================================================================
# Retrieval Configuration
# =============================================================================
TOP_K=5
RETRIEVAL_K=20
CHUNK_SIZE=900
CHUNK_OVERLAP=150

# =============================================================================
# Hybrid Search Weights (must sum to 1.0)
# =============================================================================
SEMANTIC_WEIGHT=0.7
BM25_WEIGHT=0.3

# =============================================================================
# Reranking Configuration
# =============================================================================
RERANK_ENABLED=true
RERANK_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2
RERANK_USE_MMR=true
MMR_LAMBDA=0.5

# =============================================================================
# Embedding Model (local, no API needed)
# =============================================================================
EMBED_MODEL=intfloat/multilingual-e5-large

# =============================================================================
# Semantic Chunking
# =============================================================================
USE_SEMANTIC_CHUNKING=true
SEMANTIC_SIMILARITY_THRESHOLD=0.7

# =============================================================================
# Query Expansion
# =============================================================================
QUERY_EXPANSION_ENABLED=true
QUERY_EXPANSION_METHOD=acronym

# =============================================================================
# Redis Cache Configuration
# =============================================================================
CACHE_ENABLED=true
REDIS_DB=0
REDIS_PASSWORD=
CACHE_TTL=3600

# Redis Memory Configuration (for Redis container)
REDIS_MAX_MEMORY=128mb
REDIS_SAVE=""
REDIS_APPENDONLY=no

# =============================================================================
# Monitoring Configuration
# =============================================================================
METRICS_ENABLED=true

# =============================================================================
# Logging Configuration
# =============================================================================
# Use console format for development (human-readable)
LOG_LEVEL=DEBUG
LOG_FORMAT=console
