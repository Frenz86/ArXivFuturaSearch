# =============================================================================
# ENVIRONMENT VARIABLES EXAMPLE
# =============================================================================
# Copy this file to .env and update with your actual values

# =============================================================================
# SECURITY
# =============================================================================
# IMPORTANT: Generate a secure random key for production!
# Use: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=changeme-secret-key-generate-with-python-secrets

# JWT Token expiration
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password requirements (default values shown)
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL=true

# =============================================================================
# OAUTH2 PROVIDERS (Optional)
# =============================================================================
# Get credentials from:
# Google: https://console.cloud.google.com/apis/credentials
# GitHub: https://github.com/settings/developers

GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:8000/api/auth/oauth/google/callback

GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_REDIRECT_URI=http://localhost:8000/api/auth/oauth/github/callback

# =============================================================================
# DATABASE
# =============================================================================
# PostgreSQL for auth, conversations, collections, alerts
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/arxiv_rag

# Alternative format (if you prefer separate variables):
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=arxiv_rag
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=postgres

# Database echo (for debugging)
DATABASE_ECHO=false

# Connection pool settings
POSTGRES_POOL_SIZE=10
POSTGRES_MAX_OVERFLOW=20
POSTGRES_POOL_TIMEOUT=30
POSTGRES_POOL_RECYCLE=3600

# =============================================================================
# VECTOR STORE
# =============================================================================
# Options: "chroma" (local) or "pgvector" (production)
VECTORSTORE_MODE=chroma

# ChromaDB local storage
CHROMA_DIR=data/chroma_db

# =============================================================================
# EMBEDDINGS
# =============================================================================
# Available models:
# - intfloat/multilingual-e5-large (default, 1024 dim)
# - intfloat/multilingual-e5-base (768 dim, faster)
# - intfloat/multilingual-e5-small (384 dim, fastest)
# - BAAI/bge-m3-retromae (1024 dim, excellent retrieval)
# - BAAI/bge-large-en-v1.5 (1024 dim, English only)
# - sentence-transformers/all-MiniLM-L6-v2 (384 dim, English only)

EMBED_MODEL=intfloat/multilingual-e5-large

# Batch processing
BATCH_PROCESSING_STRATEGY=thread_parallel
EMBEDDING_BATCH_SIZE=32
EMBEDDING_MAX_WORKERS=0
EMBEDDING_ENABLE_GPU=true
EMBEDDING_RETRY_FAILED=true
EMBEDDING_MAX_RETRIES=3

# =============================================================================
# LLM CONFIGURATION
# =============================================================================
# Options: "openrouter", "ollama", "mock"
LLM_MODE=openrouter

# OpenRouter (requires API key from https://openrouter.ai/)
OPENROUTER_API_KEY=your-openrouter-api-key-here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet
OPENROUTER_TIMEOUT=120
OPENROUTER_MAX_RETRIES=3

# Alternative models ( uncomment to use ):
# OPENROUTER_MODEL=anthropic/claude-3-haiku
# OPENROUTER_MODEL=openai/gpt-4o
# OPENROUTER_MODEL=google/gemini-2.0-flash-exp
# OPENROUTER_MODEL=meta-llama/llama-3.1-405b-instruct

# Ollama (local, free)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.1

# =============================================================================
# REDIS CACHE
# =============================================================================
# Leave empty to disable Redis (uses in-memory cache)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Cache TTL (seconds)
CACHE_TTL=3600

# =============================================================================
# SEMANTIC CACHE
# =============================================================================
SEMANTIC_CACHE_ENABLED=true
SEMANTIC_CACHE_SIMILARITY_THRESHOLD=0.85
SEMANTIC_CACHE_MAX_ENTRIES=1000
SEMANTIC_CACHE_STRATEGY=hybrid
SEMANTIC_CACHE_PRECOMPUTED_EMBEDDINGS=true

# Cache warming
CACHE_WARMING_ENABLED=true
CACHE_WARMING_STATIC=true
CACHE_WARMING_CONCURRENCY=5

# =============================================================================
# RETRIEVAL SETTINGS
# =============================================================================
TOP_K=5
RETRIEVAL_K=20
CHUNK_SIZE=900
CHUNK_OVERLAP=150

# Semantic chunking
USE_SEMANTIC_CHUNKING=true
SEMANTIC_SIMILARITY_THRESHOLD=0.7

# Hybrid search weights
SEMANTIC_WEIGHT=0.7
BM25_WEIGHT=0.3

# Reranking
RERANK_ENABLED=true
RERANK_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2
RERANK_USE_MMR=true
MMR_LAMBDA=0.5

# Query expansion
QUERY_EXPANSION_ENABLED=true
QUERY_EXPANSION_METHOD=acronym

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Conversations
CONVERSATION_ENABLED=true
MAX_CONTEXT_TOKENS=8000
CONVERSATION_SUMMARIZATION_THRESHOLD=10

# Alerts
ALERTS_ENABLED=true
ALERT_CHECK_INTERVAL_MINUTES=60

# Collections
COLLECTIONS_ENABLED=true
PUBLIC_COLLECTIONS_ENABLED=true
SHARE_LINK_EXPIRY_HOURS=168

# Export
EXPORT_ENABLED=true
EXPORT_TEMP_DIR=data/exports
EXPORT_MAX_SIZE_MB=50

# =============================================================================
# MONITORING
# =============================================================================
METRICS_ENABLED=true
PROMETHEUS_PORT=8001

# =============================================================================
# LOGGING
# =============================================================================
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
# Options: json, console
LOG_FORMAT=json

# =============================================================================
# OPENTELEMETRY
# =============================================================================
# Trace exporters: "console", "otlp", "jaeger", "none"
OTEL_TRACE_EXPORTER=console
OTEL_METRICS_EXPORTER=console

# OTLP endpoint (if using otlp exporter)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# Jaeger (if using jaeger exporter)
OTEL_EXPORTER_JAEGER_HOST=localhost
OTEL_EXPORTER_JAEGER_PORT=6831

# Service name
OTEL_SERVICE_NAME=arxiv-futura-search

# =============================================================================
# ENVIRONMENT
# =============================================================================
# Options: development, production
ENVIRONMENT=development
